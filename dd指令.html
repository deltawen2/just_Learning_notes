<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>dd指令</title>
  <link rel="stylesheet" href="https://stackedit.cn/style.css" />
  <style type="text/css">
    .app--dark {
      background-color: #444;
    }
    .app--dark .stackedit__html {
      padding-left: 0;
      padding-right: 0;
    }
    .app--dark .stackedit__content {
      padding: 1px 20px 20px;
    }
    
  </style>
</head>

<body class="stackedit app--dark">
  <div class="stackedit__left">
    <div class="stackedit__toc">
      
<ul>
<li><a href="#dd-是-linux-中非常強大的低階資料處理工具，常用於磁碟備份、映像製作、資料轉換等。以下是完整的說明與範例：">dd 是 Linux 中非常強大的低階資料處理工具，常用於磁碟備份、映像製作、資料轉換等。以下是完整的說明與範例：</a>
<ul>
<li><a href="#🧠-基本語法">🧠 基本語法</a></li>
<li><a href="#🧪-常見用途與範例">🧪 常見用途與範例</a></li>
<li><a href="#🧪-性能測試範例">🧪 性能測試範例</a></li>
<li><a href="#備份到別台電腦">備份到別台電腦</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
  <div class="stackedit__right">
    <div class="stackedit__html">
      <div class="stackedit__content preview-theme--default">
        <h1 id="dd-是-linux-中非常強大的低階資料處理工具，常用於磁碟備份、映像製作、資料轉換等。以下是完整的說明與範例："><span class="prefix"></span><span class="content"><code>dd</code> 是 Linux 中非常強大的低階資料處理工具，常用於磁碟備份、映像製作、資料轉換等。以下是完整的說明與範例：</span><span class="suffix"></span></h1>
<hr>
<h2 id="🧠-基本語法"><span class="prefix"></span><span class="content">🧠 基本語法</span><span class="suffix"></span></h2>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span><span class="token operator">&lt;</span>來源<span class="token operator">&gt;</span> of<span class="token operator">=</span><span class="token operator">&lt;</span>目的<span class="token operator">&gt;</span> <span class="token punctuation">[</span>參數<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre>
<h2 id="🧪-常見用途與範例"><span class="prefix"></span><span class="content">🧪 常見用途與範例</span><span class="suffix"></span></h2>
<h3 id="🔹-建立空白檔案（填充-0）"><span class="prefix"></span><span class="content">🔹 建立空白檔案（填充 0）</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>/dev/zero of<span class="token operator">=</span>empty_100MB.bin bs<span class="token operator">=</span>1M count<span class="token operator">=</span>100
</code></pre>
<h3 id="🔹-建立隨機檔案（填充亂數）"><span class="prefix"></span><span class="content">🔹 建立隨機檔案（填充亂數）</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>/dev/urandom of<span class="token operator">=</span>random_10MB.bin bs<span class="token operator">=</span>1M count<span class="token operator">=</span>10
</code></pre>
<h3 id="🔹-建立稀疏檔案（不實際佔空間）"><span class="prefix"></span><span class="content">🔹 建立稀疏檔案（不實際佔空間）</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>/dev/zero of<span class="token operator">=</span>sparse_1GB.img bs<span class="token operator">=</span>1 count<span class="token operator">=</span>0 seek<span class="token operator">=</span>1G
</code></pre>
<h3 id="🔹-備份整顆硬碟"><span class="prefix"></span><span class="content">🔹 備份整顆硬碟</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>/dev/sda of<span class="token operator">=</span>backup.img bs<span class="token operator">=</span>4M status<span class="token operator">=</span>progress
</code></pre>
<h3 id="🔹-回復硬碟映像"><span class="prefix"></span><span class="content">🔹 回復硬碟映像</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>backup.img of<span class="token operator">=</span>/dev/sda bs<span class="token operator">=</span>4M status<span class="token operator">=</span>progress
</code></pre>
<h3 id="🔹-製作-bootable-usb"><span class="prefix"></span><span class="content">🔹 製作 bootable USB</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>ubuntu.iso of<span class="token operator">=</span>/dev/sdb bs<span class="token operator">=</span>4M status<span class="token operator">=</span>progress
</code></pre>
<h2 id="🧪-性能測試範例"><span class="prefix"></span><span class="content">🧪 性能測試範例</span><span class="suffix"></span></h2>
<h3 id="🔸-測試寫入速度"><span class="prefix"></span><span class="content">🔸 測試寫入速度</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>/dev/zero of<span class="token operator">=</span>testfile bs<span class="token operator">=</span>1G count<span class="token operator">=</span>1 conv<span class="token operator">=</span>fdatasync
</code></pre>
<h3 id="🔸-測試讀取速度"><span class="prefix"></span><span class="content">🔸 測試讀取速度</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>testfile of<span class="token operator">=</span>/dev/null bs<span class="token operator">=</span>1G
</code></pre>
<h2 id="備份到別台電腦"><span class="prefix"></span><span class="content">備份到別台電腦</span><span class="suffix"></span></h2>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>/dev/zero bs<span class="token operator">=</span>4M count<span class="token operator">=</span>250 iflag<span class="token operator">=</span>fullblock <span class="token operator">|</span> <span class="token function">ssh</span> deltawen@192.168.99.7 <span class="token string">"dd of=/dev/shm/testfile bs=4M conv=fdatasync"</span>
</code></pre>
<pre class=" language-mermaid"><svg id="mermaid-svg-or9ouNnUpnhEepbf" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="57.71875" style="max-width: 537.953125px;" viewBox="0 0 537.953125 57.71875"><style>#mermaid-svg-or9ouNnUpnhEepbf{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-or9ouNnUpnhEepbf .error-icon{fill:#552222;}#mermaid-svg-or9ouNnUpnhEepbf .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-or9ouNnUpnhEepbf .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-or9ouNnUpnhEepbf .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-or9ouNnUpnhEepbf .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-or9ouNnUpnhEepbf .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-or9ouNnUpnhEepbf .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-or9ouNnUpnhEepbf .marker{fill:#666;stroke:#666;}#mermaid-svg-or9ouNnUpnhEepbf .marker.cross{stroke:#666;}#mermaid-svg-or9ouNnUpnhEepbf svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-or9ouNnUpnhEepbf .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#000000;}#mermaid-svg-or9ouNnUpnhEepbf .cluster-label text{fill:#333;}#mermaid-svg-or9ouNnUpnhEepbf .cluster-label span{color:#333;}#mermaid-svg-or9ouNnUpnhEepbf .label text,#mermaid-svg-or9ouNnUpnhEepbf span{fill:#000000;color:#000000;}#mermaid-svg-or9ouNnUpnhEepbf .node rect,#mermaid-svg-or9ouNnUpnhEepbf .node circle,#mermaid-svg-or9ouNnUpnhEepbf .node ellipse,#mermaid-svg-or9ouNnUpnhEepbf .node polygon,#mermaid-svg-or9ouNnUpnhEepbf .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-svg-or9ouNnUpnhEepbf .node .label{text-align:center;}#mermaid-svg-or9ouNnUpnhEepbf .node.clickable{cursor:pointer;}#mermaid-svg-or9ouNnUpnhEepbf .arrowheadPath{fill:#333333;}#mermaid-svg-or9ouNnUpnhEepbf .edgePath .path{stroke:#666;stroke-width:1.5px;}#mermaid-svg-or9ouNnUpnhEepbf .flowchart-link{stroke:#666;fill:none;}#mermaid-svg-or9ouNnUpnhEepbf .edgeLabel{background-color:white;text-align:center;}#mermaid-svg-or9ouNnUpnhEepbf .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-svg-or9ouNnUpnhEepbf .cluster rect{fill:hsl(210,66.6666666667%,95%);stroke:#26a;stroke-width:1px;}#mermaid-svg-or9ouNnUpnhEepbf .cluster text{fill:#333;}#mermaid-svg-or9ouNnUpnhEepbf .cluster span{color:#333;}#mermaid-svg-or9ouNnUpnhEepbf div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(-160,0%,93.3333333333%);border:1px solid #26a;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-or9ouNnUpnhEepbf:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-or9ouNnUpnhEepbf flowchart-v2{fill:apa;}</style><g transform="translate(0, 0)"><marker id="flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M167.03125,28.859375L171.19791666666666,28.859375C175.36458333333334,28.859375,183.69791666666666,28.859375,192.03125,28.859375C200.36458333333334,28.859375,208.69791666666666,28.859375,212.86458333333334,28.859375L217.03125,28.859375" id="L-A-B" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-B" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M333.390625,28.859375L337.5572916666667,28.859375C341.7239583333333,28.859375,350.0572916666667,28.859375,358.390625,28.859375C366.7239583333333,28.859375,375.0572916666667,28.859375,379.2239583333333,28.859375L383.390625,28.859375" id="L-B-C" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-C" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default default" id="flowchart-A-3455" transform="translate(87.515625, 28.859375)"><rect class="basic label-container" style="" rx="0" ry="0" x="-79.515625" y="-20.859375" width="159.03125" height="41.71875"></rect><g class="label" style="" transform="translate(-72.015625, -13.359375)"><foreignObject width="144.03125" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">本機生成1GB零資料</span></div></foreignObject></g></g><g class="node default default" id="flowchart-B-3456" transform="translate(275.2109375, 28.859375)"><rect class="basic label-container" style="" rx="0" ry="0" x="-58.1796875" y="-20.859375" width="116.359375" height="41.71875"></rect><g class="label" style="" transform="translate(-50.6796875, -13.359375)"><foreignObject width="101.359375" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">SSH 管線傳送</span></div></foreignObject></g></g><g class="node default default" id="flowchart-C-3457" transform="translate(456.671875, 28.859375)"><rect class="basic label-container" style="" rx="0" ry="0" x="-73.28125" y="-20.859375" width="146.5625" height="41.71875"></rect><g class="label" style="" transform="translate(-65.78125, -13.359375)"><foreignObject width="131.5625" height="26.71875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">遠端寫入RAM檔案</span></div></foreignObject></g></g></g></g></g></svg></pre>
<p>這串指令做了以下事情：</p>
<ol>
<li>在本機產生 1GB 的零值資料（全 0 bit）</li>
<li>經由 SSH 傳送到遠端主機（192.168.99.7）</li>
<li>在遠端寫入到 <code>/dev/shm/testfile</code>（RAM-based filesystem）</li>
<li>確保寫入完成後資料 flush 到裝置（雖然是 RAM）</li>
</ol>
<h3 id="分段解析-本機"><span class="prefix"></span><span class="content">分段解析 本機</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> if<span class="token operator">=</span>/dev/zero bs<span class="token operator">=</span>4M count<span class="token operator">=</span>250 iflag<span class="token operator">=</span>fullblock
</code></pre>
<ul>
<li><code>if=/dev/zero</code>：讀取來源資料，全都是零值</li>
<li><code>bs=4M</code>：每個 block 是 4MB</li>
<li><code>count=250</code>：共產生 250 個 blocks → 4MB × 250 = <strong>1GB</strong></li>
<li><code>iflag=fullblock</code>：這很關鍵，確保每次讀滿 block（避免 partial read 警告）<br>
🔸 若沒加 <code>iflag=fullblock</code>，有可能只讀到部分資料（例如 32KB），造成傳送失敗。</li>
</ul>
<h3 id="傳送過程"><span class="prefix"></span><span class="content">傳送過程</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token operator">|</span> <span class="token function">ssh</span> deltawen@192.168.99.7 <span class="token punctuation">..</span>.
</code></pre>
<h3 id="遠端執行部分："><span class="prefix"></span><span class="content">遠端執行部分：</span><span class="suffix"></span></h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token function">dd</span> of<span class="token operator">=</span>/dev/shm/testfile bs<span class="token operator">=</span>4M conv<span class="token operator">=</span>fdatasync
</code></pre>
<ul>
<li>
<p><code>of=/dev/shm/testfile</code>：寫入到遠端 RAM disk</p>
</li>
<li>
<p><code>bs=4M</code>：一次寫入 4MB chunk</p>
</li>
<li>
<p><code>conv=fdatasync</code>：確保資料 flush 到裝置（在 <code>/dev/shm</code> 中，就是記憶體）</p>
<ul>
<li>雖然是 RAM，<code>fdatasync</code> 確保寫入程序完整結束，可作為資料一致性保證</li>
</ul>
</li>
</ul>

      </div>
    </div>
  </div>
</body>

</html>
